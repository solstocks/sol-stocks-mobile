{"ast":null,"code":"var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _classCallCheck2=_interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));var _createClass2=_interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));var _objectSpread2=_interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread2\"));var _invariant=_interopRequireDefault(require(\"fbjs/lib/invariant\"));var TaskQueue=function(){function TaskQueue(_ref){(0,_classCallCheck2.default)(this,TaskQueue);var onMoreTasks=_ref.onMoreTasks;this._onMoreTasks=onMoreTasks;this._queueStack=[{tasks:[],popable:true}];}return(0,_createClass2.default)(TaskQueue,[{key:\"enqueue\",value:function enqueue(task){this._getCurrentQueue().push(task);}},{key:\"enqueueTasks\",value:function enqueueTasks(tasks){var _this=this;tasks.forEach(function(task){return _this.enqueue(task);});}},{key:\"cancelTasks\",value:function cancelTasks(tasksToCancel){this._queueStack=this._queueStack.map(function(queue){return(0,_objectSpread2.default)((0,_objectSpread2.default)({},queue),{},{tasks:queue.tasks.filter(function(task){return tasksToCancel.indexOf(task)===-1;})});}).filter(function(queue,idx){return queue.tasks.length>0||idx===0;});}},{key:\"hasTasksToProcess\",value:function hasTasksToProcess(){return this._getCurrentQueue().length>0;}},{key:\"processNext\",value:function processNext(){var queue=this._getCurrentQueue();if(queue.length){var task=queue.shift();try{if(typeof task==='object'&&task.gen){this._genPromise(task);}else if(typeof task==='object'&&task.run){task.run();}else{(0,_invariant.default)(typeof task==='function','Expected Function, SimpleTask, or PromiseTask, but got:\\n'+JSON.stringify(task,null,2));task();}}catch(e){e.message='TaskQueue: Error with task '+(task.name||'')+': '+e.message;throw e;}}}},{key:\"_getCurrentQueue\",value:function _getCurrentQueue(){var stackIdx=this._queueStack.length-1;var queue=this._queueStack[stackIdx];if(queue.popable&&queue.tasks.length===0&&stackIdx>0){this._queueStack.pop();return this._getCurrentQueue();}else{return queue.tasks;}}},{key:\"_genPromise\",value:function _genPromise(task){var _this2=this;var length=this._queueStack.push({tasks:[],popable:false});var stackIdx=length-1;var stackItem=this._queueStack[stackIdx];task.gen().then(function(){stackItem.popable=true;_this2.hasTasksToProcess()&&_this2._onMoreTasks();}).catch(function(ex){setTimeout(function(){ex.message=\"TaskQueue: Error resolving Promise in task \"+task.name+\": \"+ex.message;throw ex;},0);});}}]);}();var _default=exports.default=TaskQueue;","map":{"version":3,"names":["_objectSpread2","_interopRequireDefault","require","_invariant","TaskQueue","_ref","_classCallCheck2","default","onMoreTasks","_onMoreTasks","_queueStack","tasks","popable","_createClass2","key","value","enqueue","task","_getCurrentQueue","push","enqueueTasks","_this","forEach","cancelTasks","tasksToCancel","map","queue","_objectSpread","filter","indexOf","idx","length","hasTasksToProcess","processNext","shift","gen","_genPromise","run","invariant","JSON","stringify","e","message","name","stackIdx","pop","_this2","stackItem","then","catch","ex","setTimeout","_default","exports"],"sources":["/Users/sarahfitzgerald/SolStocksMobile/node_modules/react-native-web/dist/exports/InteractionManager/TaskQueue.js"],"sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/objectSpread2\";\n/**\n * Copyright (c) Nicolas Gallagher.\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * \n */\n\nimport invariant from 'fbjs/lib/invariant';\nclass TaskQueue {\n  constructor(_ref) {\n    var onMoreTasks = _ref.onMoreTasks;\n    this._onMoreTasks = onMoreTasks;\n    this._queueStack = [{\n      tasks: [],\n      popable: true\n    }];\n  }\n  enqueue(task) {\n    this._getCurrentQueue().push(task);\n  }\n  enqueueTasks(tasks) {\n    tasks.forEach(task => this.enqueue(task));\n  }\n  cancelTasks(tasksToCancel) {\n    this._queueStack = this._queueStack.map(queue => _objectSpread(_objectSpread({}, queue), {}, {\n      tasks: queue.tasks.filter(task => tasksToCancel.indexOf(task) === -1)\n    })).filter((queue, idx) => queue.tasks.length > 0 || idx === 0);\n  }\n  hasTasksToProcess() {\n    return this._getCurrentQueue().length > 0;\n  }\n\n  /**\n   * Executes the next task in the queue.\n   */\n  processNext() {\n    var queue = this._getCurrentQueue();\n    if (queue.length) {\n      var task = queue.shift();\n      try {\n        if (typeof task === 'object' && task.gen) {\n          this._genPromise(task);\n        } else if (typeof task === 'object' && task.run) {\n          task.run();\n        } else {\n          invariant(typeof task === 'function', 'Expected Function, SimpleTask, or PromiseTask, but got:\\n' + JSON.stringify(task, null, 2));\n          task();\n        }\n      } catch (e) {\n        e.message = 'TaskQueue: Error with task ' + (task.name || '') + ': ' + e.message;\n        throw e;\n      }\n    }\n  }\n  _getCurrentQueue() {\n    var stackIdx = this._queueStack.length - 1;\n    var queue = this._queueStack[stackIdx];\n    if (queue.popable && queue.tasks.length === 0 && stackIdx > 0) {\n      this._queueStack.pop();\n      return this._getCurrentQueue();\n    } else {\n      return queue.tasks;\n    }\n  }\n  _genPromise(task) {\n    var length = this._queueStack.push({\n      tasks: [],\n      popable: false\n    });\n    var stackIdx = length - 1;\n    var stackItem = this._queueStack[stackIdx];\n    task.gen().then(() => {\n      stackItem.popable = true;\n      this.hasTasksToProcess() && this._onMoreTasks();\n    }).catch(ex => {\n      setTimeout(() => {\n        ex.message = \"TaskQueue: Error resolving Promise in task \" + task.name + \": \" + ex.message;\n        throw ex;\n      }, 0);\n    });\n  }\n}\nexport default TaskQueue;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}