(()=>{var e={918:function(e,t,n){var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.MobilePortfolio=void 0;var o=r(n(9293)),a=r(n(5715)),i=function(e,t){if("function"==typeof WeakMap)var n=new WeakMap,r=new WeakMap;return function(e,t){if(!t&&e&&e.__esModule)return e;var o,a,i={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return i;if(o=t?r:n){if(o.has(e))return o.get(e);o.set(e,i)}for(var l in e)"default"!==l&&{}.hasOwnProperty.call(e,l)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,l))&&(a.get||a.set)?o(i,l,a):i[l]=e[l]);return i}(e,t)}(n(6665)),l=n(3499),c=n(8267),s=n(2981),u=n(397);l.Dimensions.get("window").width;t.MobilePortfolio=function(){var e=(0,i.useState)(null),t=(0,a.default)(e,2),n=t[0],r=t[1],f=(0,i.useState)([]),y=(0,a.default)(f,2),h=y[0],g=y[1],p=(0,i.useState)({totalValue:0,totalInvested:0,totalPL:0,totalPLPercent:0,solBalance:0,dayChange:0,dayChangePercent:0}),m=(0,a.default)(p,2),S=m[0],v=m[1],b=(0,i.useState)(!1),x=(0,a.default)(b,2),P=x[0],T=x[1],C=(0,i.useState)(!0),w=(0,a.default)(C,2),k=(w[0],w[1]);(0,i.useEffect)(function(){A()},[]),(0,i.useEffect)(function(){n&&E()},[n]);var A=function(){var e=(0,o.default)(function*(){try{var e=c.mobileWalletService.getPublicKey();r(e)}catch(t){console.error("Failed to check wallet connection:",t)}});return function(){return e.apply(this,arguments)}}(),O=function(){var e=(0,o.default)(function*(){try{var e=yield c.mobileWalletService.connect();e&&(r(e),l.Alert.alert("Success",`Wallet connected: ${e.toBase58().substring(0,8)}...`))}catch(t){console.error("Wallet connection failed:",t),l.Alert.alert("Error","Failed to connect wallet")}});return function(){return e.apply(this,arguments)}}(),E=function(){var e=(0,o.default)(function*(){if(n){k(!0);try{var e=(yield s.solanaPayService.getPaymentHistory()).filter(function(e){return"confirmed"===e.status}),t=new Map;e.forEach(function(e){if(t.has(e.stockSymbol)){var n=t.get(e.stockSymbol);n.quantity+=e.quantity,n.totalInvested+=e.totalUSD}else t.set(e.stockSymbol,{symbol:e.stockSymbol,quantity:e.quantity,totalInvested:e.totalUSD,category:e.category})});var r=Array.from(t.values()).map(function(e){var t=R(e.symbol),n=e.totalInvested/e.quantity,r=t*e.quantity,o=r-e.totalInvested,a=o/e.totalInvested*100;return{symbol:e.symbol,name:j(e.symbol),quantity:e.quantity,avgPrice:n,currentPrice:t,totalValue:r,unrealizedPL:o,unrealizedPLPercent:a,category:e.category}});g(r);var o=r.reduce(function(e,t){return e+t.totalValue},0),a=r.reduce(function(e,t){return e+t.avgPrice*t.quantity},0),i=o-a,u=a>0?i/a*100:0,d=yield c.mobileWalletService.getBalance(),f=o*(.06*Math.random()-.03);v({totalValue:o,totalInvested:a,totalPL:i,totalPLPercent:u,solBalance:d,dayChange:f,dayChangePercent:o>0?f/o*100:0})}catch(y){console.error("Failed to load portfolio data:",y),l.Alert.alert("Error","Failed to load portfolio data")}finally{k(!1)}}});return function(){return e.apply(this,arguments)}}(),R=function(e){return{AAPL:178.72,GOOGL:138.21,MSFT:378.85,TSLA:248.5,AMZN:155.89,COIN:245.67,MSTR:387.45,RIOT:12.85,MARA:19.67,HOOD:23.45,VANA:45.32,CIRCLE:125,GEMINI:89.5,KRAKEN:156.78,OPENSEA:67.34}[e]||100},j=function(e){return{AAPL:"Apple Inc.",GOOGL:"Alphabet Inc.",MSFT:"Microsoft Corp.",TSLA:"Tesla Inc.",AMZN:"Amazon.com Inc.",COIN:"Coinbase Global",MSTR:"MicroStrategy Inc.",RIOT:"Riot Platforms",MARA:"Marathon Digital",HOOD:"Robinhood Markets",VANA:"Vanna Holdings",CIRCLE:"Circle Internet Financial",GEMINI:"Gemini Trust Company",KRAKEN:"Kraken Digital Asset Exchange",OPENSEA:"OpenSea Technologies"}[e]||e},L=function(){var e=(0,o.default)(function*(e){l.Alert.prompt("Sell Stock",`How many shares of ${e.symbol} would you like to sell?\nYou own ${e.quantity} shares`,[{text:"Cancel",style:"cancel"},{text:"Sell",onPress:function(){var t=(0,o.default)(function*(t){if(t&&!isNaN(Number(t))){var n=Number(t);if(n>e.quantity)return void l.Alert.alert("Error","You cannot sell more shares than you own");yield I(e,n)}});return function(e){return t.apply(this,arguments)}}()}],"plain-text",Math.min(e.quantity,1).toString())});return function(t){return e.apply(this,arguments)}}(),I=function(){var e=(0,o.default)(function*(e,t){try{if(!n)return;var r=e.currentPrice*t,o=s.solanaPayService.calculateTradingFee(e.symbol,r/200,"sell").feeSOL,a=r/200-o;l.Alert.alert("Confirm Sale",`Sell ${t} shares of ${e.symbol}\n\nSale Value: $${r.toFixed(2)}\nYou'll receive: ${a.toFixed(4)} SOL\nTrading Fee: ${o.toFixed(4)} SOL`,[{text:"Cancel",style:"cancel"},{text:"Confirm Sale",onPress:function(){return _(e,t,a)}}])}catch(i){console.error("Sell processing failed:",i),l.Alert.alert("Error","Failed to process sale")}});return function(t,n){return e.apply(this,arguments)}}(),_=function(){var e=(0,o.default)(function*(e,t,n){try{l.Alert.alert("Sale Successful!",`Sold ${t} shares of ${e.symbol}\nReceived: ${n.toFixed(4)} SOL`,[{text:"OK",onPress:function(){return B()}}])}catch(r){console.error("Sell execution failed:",r),l.Alert.alert("Error","Failed to execute sale")}});return function(t,n,r){return e.apply(this,arguments)}}(),B=function(){var e=(0,o.default)(function*(){T(!0),yield E(),T(!1)});return function(){return e.apply(this,arguments)}}();return n?(0,u.jsxs)(l.ScrollView,{style:d.container,refreshControl:(0,u.jsx)(l.RefreshControl,{refreshing:P,onRefresh:B}),children:[(0,u.jsxs)(l.View,{style:d.summaryContainer,children:[(0,u.jsxs)(l.View,{style:d.summaryHeader,children:[(0,u.jsx)(l.Text,{style:d.summaryTitle,children:"Portfolio Value"}),(0,u.jsxs)(l.Text,{style:d.totalValue,children:["$",S.totalValue.toFixed(2)]}),(0,u.jsxs)(l.View,{style:d.dayChange,children:[(0,u.jsxs)(l.Text,{style:[d.dayChangeText,S.dayChange>=0?d.positive:d.negative],children:[S.dayChange>=0?"+":"","$",Math.abs(S.dayChange).toFixed(2)," (",S.dayChangePercent>=0?"+":"",S.dayChangePercent.toFixed(2),"%)"]}),(0,u.jsx)(l.Text,{style:d.dayChangeLabel,children:"Today"})]})]}),(0,u.jsxs)(l.View,{style:d.summaryStats,children:[(0,u.jsxs)(l.View,{style:d.statItem,children:[(0,u.jsx)(l.Text,{style:d.statLabel,children:"Total P&L"}),(0,u.jsxs)(l.Text,{style:[d.statValue,S.totalPL>=0?d.positive:d.negative],children:[S.totalPL>=0?"+":"","$",S.totalPL.toFixed(2)]}),(0,u.jsxs)(l.Text,{style:[d.statPercent,S.totalPL>=0?d.positive:d.negative],children:["(",S.totalPLPercent>=0?"+":"",S.totalPLPercent.toFixed(2),"%)"]})]}),(0,u.jsxs)(l.View,{style:d.statItem,children:[(0,u.jsx)(l.Text,{style:d.statLabel,children:"SOL Balance"}),(0,u.jsxs)(l.Text,{style:d.statValue,children:[S.solBalance.toFixed(4)," SOL"]}),(0,u.jsxs)(l.Text,{style:d.statPercent,children:["$",(200*S.solBalance).toFixed(2)]})]})]})]}),(0,u.jsxs)(l.View,{style:d.holdingsContainer,children:[(0,u.jsx)(l.Text,{style:d.holdingsTitle,children:"Your Holdings"}),0===h.length?(0,u.jsxs)(l.View,{style:d.noHoldingsContainer,children:[(0,u.jsx)(l.Text,{style:d.noHoldingsText,children:"No holdings yet"}),(0,u.jsx)(l.Text,{style:d.noHoldingsSubtext,children:"Start trading to build your portfolio"})]}):h.map(function(e){return(0,u.jsxs)(l.TouchableOpacity,{style:d.holdingItem,onPress:function(){return L(e)},children:[(0,u.jsxs)(l.View,{style:d.holdingHeader,children:[(0,u.jsxs)(l.View,{children:[(0,u.jsx)(l.Text,{style:d.holdingSymbol,children:e.symbol}),(0,u.jsx)(l.Text,{style:d.holdingName,children:e.name})]}),(0,u.jsx)(l.View,{style:[d.categoryBadge,d[`${e.category}Badge`]],children:(0,u.jsx)(l.Text,{style:d.categoryText,children:e.category.toUpperCase()})})]}),(0,u.jsxs)(l.View,{style:d.holdingDetails,children:[(0,u.jsxs)(l.View,{style:d.holdingRow,children:[(0,u.jsx)(l.Text,{style:d.holdingLabel,children:"Quantity"}),(0,u.jsxs)(l.Text,{style:d.holdingValue,children:[e.quantity," shares"]})]}),(0,u.jsxs)(l.View,{style:d.holdingRow,children:[(0,u.jsx)(l.Text,{style:d.holdingLabel,children:"Avg Price"}),(0,u.jsxs)(l.Text,{style:d.holdingValue,children:["$",e.avgPrice.toFixed(2)]})]}),(0,u.jsxs)(l.View,{style:d.holdingRow,children:[(0,u.jsx)(l.Text,{style:d.holdingLabel,children:"Current Price"}),(0,u.jsxs)(l.Text,{style:d.holdingValue,children:["$",e.currentPrice.toFixed(2)]})]}),(0,u.jsxs)(l.View,{style:d.holdingRow,children:[(0,u.jsx)(l.Text,{style:d.holdingLabel,children:"Total Value"}),(0,u.jsxs)(l.Text,{style:d.holdingValue,children:["$",e.totalValue.toFixed(2)]})]}),(0,u.jsxs)(l.View,{style:d.holdingRow,children:[(0,u.jsx)(l.Text,{style:d.holdingLabel,children:"Unrealized P&L"}),(0,u.jsxs)(l.Text,{style:[d.holdingValue,e.unrealizedPL>=0?d.positive:d.negative],children:[e.unrealizedPL>=0?"+":"","$",e.unrealizedPL.toFixed(2)," (",e.unrealizedPLPercent>=0?"+":"",e.unrealizedPLPercent.toFixed(2),"%)"]})]})]})]},e.symbol)})]})]}):(0,u.jsxs)(l.View,{style:d.notConnectedContainer,children:[(0,u.jsx)(l.Text,{style:d.notConnectedTitle,children:"Connect Your Wallet"}),(0,u.jsx)(l.Text,{style:d.notConnectedText,children:"Connect your Solana wallet to view your portfolio"}),(0,u.jsx)(l.TouchableOpacity,{style:d.connectButton,onPress:O,children:(0,u.jsx)(l.Text,{style:d.connectButtonText,children:"Connect Wallet"})})]})};var d=l.StyleSheet.create({container:{flex:1,backgroundColor:"#f8f9fa"},notConnectedContainer:{flex:1,justifyContent:"center",alignItems:"center",padding:32,backgroundColor:"#f8f9fa"},notConnectedTitle:{fontSize:24,fontWeight:"bold",color:"#333",marginBottom:16},notConnectedText:{fontSize:16,color:"#666",textAlign:"center",marginBottom:32},connectButton:{backgroundColor:"#9945FF",paddingHorizontal:32,paddingVertical:16,borderRadius:12},connectButtonText:{color:"#fff",fontSize:18,fontWeight:"600"},summaryContainer:{backgroundColor:"#fff",margin:16,borderRadius:16,padding:24,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:8,elevation:4},summaryHeader:{alignItems:"center",marginBottom:20},summaryTitle:{fontSize:16,color:"#666",marginBottom:8},totalValue:{fontSize:36,fontWeight:"bold",color:"#333",marginBottom:8},dayChange:{alignItems:"center"},dayChangeText:{fontSize:16,fontWeight:"600"},dayChangeLabel:{fontSize:12,color:"#999",marginTop:2},summaryStats:{flexDirection:"row",justifyContent:"space-around",paddingTop:20,borderTopWidth:1,borderTopColor:"#f0f0f0"},statItem:{alignItems:"center"},statLabel:{fontSize:12,color:"#666",marginBottom:4},statValue:{fontSize:16,fontWeight:"600",color:"#333"},statPercent:{fontSize:12,marginTop:2},positive:{color:"#4caf50"},negative:{color:"#f44336"},holdingsContainer:{padding:16},holdingsTitle:{fontSize:20,fontWeight:"bold",color:"#333",marginBottom:16},noHoldingsContainer:{alignItems:"center",paddingVertical:40},noHoldingsText:{fontSize:18,color:"#666",marginBottom:8},noHoldingsSubtext:{fontSize:14,color:"#999"},holdingItem:{backgroundColor:"#fff",borderRadius:12,padding:16,marginBottom:12,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:4,elevation:2},holdingHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:12},holdingSymbol:{fontSize:18,fontWeight:"bold",color:"#333"},holdingName:{fontSize:14,color:"#666"},categoryBadge:{paddingHorizontal:8,paddingVertical:4,borderRadius:12},traditionalBadge:{backgroundColor:"#e3f2fd"},cryptoBadge:{backgroundColor:"#f3e5f5"},premiumBadge:{backgroundColor:"#fff3e0"},categoryText:{fontSize:10,fontWeight:"600",color:"#666"},holdingDetails:{gap:8},holdingRow:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},holdingLabel:{fontSize:14,color:"#666"},holdingValue:{fontSize:14,fontWeight:"500",color:"#333"}})},1044:(e,t,n)=>{var r=n(4994),o=n(3880);n(3541);var a=n(3499),i=r(n(3655)),l=n(3585);window.addEventListener=function(){},window.removeEventListener=function(){},window.Buffer=o.Buffer,a.AppRegistry.registerComponent(l.name,function(){return i.default})},1281:()=>{},2981:(e,t,n)=>{var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.solanaPayService=t.SolanaPayService=void 0;var o=r(n(9293)),a=r(n(7383)),i=r(n(4579)),l=n(3357),c=n(6414),s=n(5027),u=r(n(7101)),d=t.SolanaPayService=(0,i.default)(function e(){(0,a.default)(this,e),this.connection=s.connection},[{key:"createStockPurchaseURL",value:function(){var e=(0,o.default)(function*(e,t="SOL"){try{var n=new c.PublicKey(Array(32).fill(0).map(function(){return Math.floor(256*Math.random())})),r={recipient:s.PROJECT_TREASURY,amount:"SOL"===t?e.solAmount+e.feeSOL:e.bonkAmount||0,splToken:"BONK"===t?s.BONK_MINT:void 0,reference:n,label:`Sol Stocks - ${e.stockSymbol}`,message:`Purchase ${e.quantity} shares of ${e.stockSymbol} for $${e.totalUSD.toFixed(2)}`,memo:`STOCK_PURCHASE:${e.stockSymbol}:${e.quantity}:${t}`},o=(0,l.encodeURL)(r);return yield this.storePaymentReference(n.toBase58(),{...e,paymentMethod:t,timestamp:Date.now(),status:"pending"}),{url:o,reference:n}}catch(a){throw console.error("Failed to create payment URL:",a),new Error("Failed to create payment URL")}});return function(t){return e.apply(this,arguments)}}()},{key:"createStockPurchaseTransaction",value:function(){var e=(0,o.default)(function*(e,t,n="SOL"){try{var r=new c.Transaction;if("SOL"===n){var o=c.SystemProgram.transfer({fromPubkey:e,toPubkey:s.PROJECT_TREASURY,lamports:t.solAmount*c.LAMPORTS_PER_SOL});r.add(o);var a=c.SystemProgram.transfer({fromPubkey:e,toPubkey:s.PROJECT_TREASURY,lamports:t.feeSOL*c.LAMPORTS_PER_SOL});r.add(a)}else if("BONK"===n&&t.bonkAmount){var i=t.solAmount+t.feeSOL,l=c.SystemProgram.transfer({fromPubkey:e,toPubkey:s.PROJECT_TREASURY,lamports:i*c.LAMPORTS_PER_SOL});r.add(l)}(new c.Transaction).add(c.SystemProgram.transfer({fromPubkey:e,toPubkey:e,lamports:0}));var u=(yield this.connection.getLatestBlockhash()).blockhash;return r.recentBlockhash=u,r.feePayer=e,r}catch(d){throw console.error("Failed to create transaction:",d),new Error("Failed to create stock purchase transaction")}});return function(t,n){return e.apply(this,arguments)}}()},{key:"calculateTradingFee",value:function(e,t,n="buy"){var r="traditional";["COIN","MSTR","RIOT","MARA","HOOD","SQ","VANA","BTBT","BTCS","SBET","GAME","UPXI"].includes(e)?r="crypto":["CIRCLE","GEMINI","KRAKEN","OPENSEA"].includes(e)&&(r="premium");var o=s.FEE_STRUCTURE[r],a="buy"===n?o.buyFeePercent:o.sellFeePercent,i=t*a/100;return{category:r,feeSOL:i=Math.max(o.minFeeSOL,Math.min(i,o.maxFeeSOL)),feePercent:a}}},{key:"convertUSDToTokens",value:function(e){return{solAmount:e/s.MOCK_SOL_PRICE_USD,bonkAmount:1e6*e}}},{key:"createStockPurchasePayment",value:function(e,t,n){var r=t*n,o=this.convertUSDToTokens(r),a=o.solAmount,i=o.bonkAmount,l=this.calculateTradingFee(e,a,"buy"),c=l.category;return{stockSymbol:e,stockPrice:t,quantity:n,totalUSD:r,solAmount:a,bonkAmount:i,feeSOL:l.feeSOL,category:c}}},{key:"confirmPayment",value:function(){var e=(0,o.default)(function*(e,t=6e4){try{for(var n=Date.now();Date.now()-n<t;){try{var r=yield(0,l.findTransactionSignature)(this.connection,e,void 0,"confirmed");if(r&&(yield(0,l.validateTransactionSignature)(this.connection,r,s.PROJECT_TREASURY,void 0,e,"confirmed"))){var o=yield this.getPaymentReference(e.toBase58());return o&&(yield this.updatePaymentStatus(e.toBase58(),"confirmed",r)),{signature:r,confirmed:!0,paymentDetails:o}}}catch(a){}yield new Promise(function(e){return setTimeout(e,2e3)})}return{signature:"",confirmed:!1}}catch(a){return console.error("Payment confirmation failed:",a),{signature:"",confirmed:!1}}});return function(t){return e.apply(this,arguments)}}()},{key:"storePaymentReference",value:function(){var e=(0,o.default)(function*(e,t){try{yield u.default.setItem(`payment_${e}`,JSON.stringify(t))}catch(n){console.error("Failed to store payment reference:",n)}});return function(t,n){return e.apply(this,arguments)}}()},{key:"getPaymentReference",value:function(){var e=(0,o.default)(function*(e){try{var t=yield u.default.getItem(`payment_${e}`);return t?JSON.parse(t):null}catch(n){return console.error("Failed to get payment reference:",n),null}});return function(t){return e.apply(this,arguments)}}()},{key:"updatePaymentStatus",value:function(){var e=(0,o.default)(function*(e,t,n){try{var r=yield this.getPaymentReference(e);if(r){var o={...r,status:t,signature:n,confirmedAt:"confirmed"===t?Date.now():void 0};yield u.default.setItem(`payment_${e}`,JSON.stringify(o))}}catch(a){console.error("Failed to update payment status:",a)}});return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getPaymentHistory",value:function(){var e=(0,o.default)(function*(){try{var e=(yield u.default.getAllKeys()).filter(function(e){return e.startsWith("payment_")}),t=yield Promise.all(e.map(function(){var e=(0,o.default)(function*(e){try{var t=yield u.default.getItem(e);return t?JSON.parse(t):null}catch{return null}});return function(t){return e.apply(this,arguments)}}()));return t.filter(function(e){return null!==e}).sort(function(e,t){return t.timestamp-e.timestamp})}catch(n){return console.error("Failed to get payment history:",n),[]}});return function(){return e.apply(this,arguments)}}()}]);t.solanaPayService=new d},3585:e=>{"use strict";e.exports=JSON.parse('{"expo":{"name":"Sol Stocks Mobile","slug":"solstocks","version":"1.0.0","orientation":"portrait","icon":"./img/background.png","userInterfaceStyle":"light","platforms":["ios","android","web"],"web":{"bundler":"webpack","output":"dist","favicon":"./img/background.png"},"android":{"package":"com.solstocks.mobile","adaptiveIcon":{"foregroundImage":"./img/background.png","backgroundColor":"#ffffff"}},"ios":{"bundleIdentifier":"com.solstocks.mobile"},"scheme":"solstocks","plugins":[],"metro":{"resolver":{"platforms":["ios","android","native","web"]}}}}')},3655:function(e,t,n){var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(9293)),a=r(n(5715)),i=function(e,t){if("function"==typeof WeakMap)var n=new WeakMap,r=new WeakMap;return function(e,t){if(!t&&e&&e.__esModule)return e;var o,a,i={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return i;if(o=t?r:n){if(o.has(e))return o.get(e);o.set(e,i)}for(var l in e)"default"!==l&&{}.hasOwnProperty.call(e,l)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,l))&&(a.get||a.set)?o(i,l,a):i[l]=e[l]);return i}(e,t)}(n(6665)),l=n(3499),c=n(5386),s=n(918),u=n(8267),d=n(6702),f=n(397);var y=l.StyleSheet.create({container:{flex:1,backgroundColor:"#f8f9fa"},loadingContainer:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"#9945FF"},loadingText:{fontSize:18,color:"#fff",fontWeight:"600"},header:{backgroundColor:"#9945FF",paddingHorizontal:20,paddingVertical:16,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:4,elevation:4},headerTop:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:8},appTitle:{fontSize:24,fontWeight:"bold",color:"#fff"},appSubtitle:{fontSize:14,color:"#e0e0ff",opacity:.9},headerActions:{flexDirection:"row",alignItems:"center"},walletInfo:{flexDirection:"row",alignItems:"center",gap:8},walletAddress:{fontSize:12,color:"#fff",backgroundColor:"rgba(255, 255, 255, 0.2)",paddingHorizontal:8,paddingVertical:4,borderRadius:12,fontFamily:"monospace"},connectButton:{backgroundColor:"#14f195",paddingHorizontal:16,paddingVertical:8,borderRadius:8},connectButtonText:{color:"#000",fontSize:14,fontWeight:"600"},airdropButton:{backgroundColor:"rgba(255, 255, 255, 0.2)",paddingHorizontal:12,paddingVertical:6,borderRadius:6},airdropButtonText:{color:"#fff",fontSize:12,fontWeight:"500"},disconnectButton:{backgroundColor:"rgba(255, 255, 255, 0.1)",paddingHorizontal:12,paddingVertical:6,borderRadius:6},disconnectButtonText:{color:"#fff",fontSize:12,fontWeight:"500"},tabBar:{flexDirection:"row",backgroundColor:"#fff",borderBottomWidth:1,borderBottomColor:"#e0e0e0"},tab:{flex:1,paddingVertical:16,alignItems:"center",borderBottomWidth:2,borderBottomColor:"transparent"},activeTab:{borderBottomColor:"#9945FF"},tabText:{fontSize:16,color:"#666",fontWeight:"500"},activeTabText:{color:"#9945FF",fontWeight:"600"},content:{flex:1}});t.default=function(){var e=(0,i.useState)("stocks"),t=(0,a.default)(e,2),n=t[0],r=t[1],h=(0,i.useState)(null),g=(0,a.default)(h,2),p=g[0],m=g[1],S=(0,i.useState)(!0),v=(0,a.default)(S,2),b=v[0],x=v[1];(0,i.useEffect)(function(){P(),T()},[]);var P=function(){var e=(0,o.default)(function*(){try{(yield d.seedVaultService.isDeviceSecure())||l.Alert.alert("Security Warning","Your device may not support hardware-backed key storage. Proceed with caution.",[{text:"OK"}]);var e=u.mobileWalletService.getPublicKey();e&&m(e),x(!1)}catch(t){console.error("App initialization failed:",t),x(!1)}});return function(){return e.apply(this,arguments)}}(),T=function(){var e=function(e){console.log("Received deep link:",e),e.startsWith("solana:")&&l.Alert.alert("Payment Request","You have received a payment request. Would you like to process it?",[{text:"Cancel",style:"cancel"},{text:"Pay",onPress:function(){return C(e)}}])};l.Linking.addEventListener("url",function(t){e(t.url)}),l.Linking.getInitialURL().then(function(t){t&&e(t)})},C=function(){var e=(0,o.default)(function*(e){try{console.log("Processing Solana Pay URL:",e),l.Alert.alert("Payment Processing","Processing your payment request...")}catch(t){console.error("Payment processing failed:",t),l.Alert.alert("Error","Failed to process payment")}});return function(t){return e.apply(this,arguments)}}(),w=function(){var e=(0,o.default)(function*(){try{var e=yield u.mobileWalletService.connect();e&&(m(e),l.Alert.alert("Wallet Connected",`Successfully connected: ${e.toBase58().substring(0,8)}...`))}catch(t){console.error("Wallet connection failed:",t),l.Alert.alert("Connection Failed","Unable to connect to wallet")}});return function(){return e.apply(this,arguments)}}(),k=function(){var e=(0,o.default)(function*(){try{yield u.mobileWalletService.disconnect(),m(null),l.Alert.alert("Wallet Disconnected","Your wallet has been disconnected")}catch(e){console.error("Wallet disconnection failed:",e)}});return function(){return e.apply(this,arguments)}}(),A=function(){var e=(0,o.default)(function*(){if(p)try{l.Alert.alert("Request Airdrop","Request 2 SOL from devnet faucet?",[{text:"Cancel",style:"cancel"},{text:"Request",onPress:function(){var e=(0,o.default)(function*(){var e=yield u.mobileWalletService.requestAirdrop(2);e?l.Alert.alert("Airdrop Successful",`Received 2 SOL!\n\nTransaction: ${e.substring(0,8)}...`):l.Alert.alert("Airdrop Failed","Unable to request airdrop")});return function(){return e.apply(this,arguments)}}()}])}catch(e){console.error("Airdrop request failed:",e),l.Alert.alert("Error","Failed to request airdrop")}else l.Alert.alert("No Wallet","Please connect your wallet first")});return function(){return e.apply(this,arguments)}}();return b?(0,f.jsxs)(l.SafeAreaView,{style:y.loadingContainer,children:[(0,f.jsx)(l.StatusBar,{barStyle:"light-content",backgroundColor:"#9945FF"}),(0,f.jsx)(l.Text,{style:y.loadingText,children:"Loading Sol Stocks..."})]}):(0,f.jsxs)(l.SafeAreaView,{style:y.container,children:[(0,f.jsx)(l.StatusBar,{barStyle:"light-content",backgroundColor:"#9945FF"}),(0,f.jsxs)(l.View,{style:y.header,children:[(0,f.jsxs)(l.View,{style:y.headerTop,children:[(0,f.jsx)(l.Text,{style:y.appTitle,children:"Sol Stocks"}),(0,f.jsx)(l.View,{style:y.headerActions,children:p?(0,f.jsxs)(l.View,{style:y.walletInfo,children:[(0,f.jsxs)(l.Text,{style:y.walletAddress,children:[p.toBase58().substring(0,6),"..."]}),(0,f.jsx)(l.TouchableOpacity,{style:y.airdropButton,onPress:A,children:(0,f.jsx)(l.Text,{style:y.airdropButtonText,children:"\ud83d\udca7 Airdrop"})}),(0,f.jsx)(l.TouchableOpacity,{style:y.disconnectButton,onPress:k,children:(0,f.jsx)(l.Text,{style:y.disconnectButtonText,children:"Disconnect"})})]}):(0,f.jsx)(l.TouchableOpacity,{style:y.connectButton,onPress:w,children:(0,f.jsx)(l.Text,{style:y.connectButtonText,children:"Connect Wallet"})})})]}),(0,f.jsx)(l.Text,{style:y.appSubtitle,children:"Trade stocks with Solana \u2022 Powered by Mobile Wallet Adapter"})]}),(0,f.jsxs)(l.View,{style:y.tabBar,children:[(0,f.jsx)(l.TouchableOpacity,{style:[y.tab,"stocks"===n&&y.activeTab],onPress:function(){return r("stocks")},children:(0,f.jsx)(l.Text,{style:[y.tabText,"stocks"===n&&y.activeTabText],children:"\ud83d\udcc8 Stocks"})}),(0,f.jsx)(l.TouchableOpacity,{style:[y.tab,"portfolio"===n&&y.activeTab],onPress:function(){return r("portfolio")},children:(0,f.jsx)(l.Text,{style:[y.tabText,"portfolio"===n&&y.activeTabText],children:"\ud83d\udcbc Portfolio"})})]}),(0,f.jsx)(l.View,{style:y.content,children:"stocks"===n?(0,f.jsx)(c.MobileStockListing,{}):(0,f.jsx)(s.MobilePortfolio,{})})]})}},5027:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.connection=t.STOCK_CATEGORIES=t.SOLANA_NETWORK=t.RPC_ENDPOINT=t.PROJECT_TREASURY=t.MOCK_SOL_PRICE_USD=t.FEE_STRUCTURE=t.DAPP_METADATA=t.BONK_MINT=t.BACKUP_TREASURY=t.APP_IDENTITY=void 0;var r=n(6414),o=t.SOLANA_NETWORK="devnet",a=t.RPC_ENDPOINT=(0,r.clusterApiUrl)(o);t.connection=new r.Connection(a,"confirmed"),t.PROJECT_TREASURY=new r.PublicKey("ATs1VRY6PGi8nSJA1RZJTpEmFc6mXNEnbWBCwWsVKWWY"),t.BACKUP_TREASURY=new r.PublicKey("9WzDXwBbmkg8ZTbNMqUxvQRAyrZzDsGYdLVL9zYtAWWM"),t.FEE_STRUCTURE={traditional:{buyFeePercent:.25,sellFeePercent:.35,minFeeSOL:.001,maxFeeSOL:.1},crypto:{buyFeePercent:.35,sellFeePercent:.45,minFeeSOL:.002,maxFeeSOL:.15},premium:{buyFeePercent:.5,sellFeePercent:.6,minFeeSOL:.003,maxFeeSOL:.2}},t.STOCK_CATEGORIES={traditional:["AAPL","GOOGL","MSFT","TSLA","AMZN"],crypto:["COIN","MSTR","RIOT","MARA","HOOD","SQ","VANA","BTBT","BTCS","SBET","GAME","UPXI"],premium:["CIRCLE","GEMINI","KRAKEN","OPENSEA"]},t.MOCK_SOL_PRICE_USD=200,t.BONK_MINT=new r.PublicKey("DezXAZ8z7PnrnRJjz3wXBoRgixCa6xjnB7YaB1pPB263"),t.APP_IDENTITY={name:"Sol Stocks",uri:"https://solstocks.com",icon:"favicon.ico"},t.DAPP_METADATA={name:"Sol Stocks",description:"Trade stocks with SOL and BONK on Solana",image:"https://solstocks.com/icon.png",website:"https://solstocks.com",category:"Finance",version:"1.0.0"}},5386:function(e,t,n){var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.MobileStockListing=void 0;var o=r(n(9293)),a=r(n(5715)),i=function(e,t){if("function"==typeof WeakMap)var n=new WeakMap,r=new WeakMap;return function(e,t){if(!t&&e&&e.__esModule)return e;var o,a,i={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return i;if(o=t?r:n){if(o.has(e))return o.get(e);o.set(e,i)}for(var l in e)"default"!==l&&{}.hasOwnProperty.call(e,l)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,l))&&(a.get||a.set)?o(i,l,a):i[l]=e[l]);return i}(e,t)}(n(6665)),l=n(3499),c=n(8267),s=n(2981),u=n(397);t.MobileStockListing=function({onStockSelect:e}){var t=(0,i.useState)([]),n=(0,a.default)(t,2),r=n[0],f=n[1],y=(0,i.useState)([]),h=(0,a.default)(y,2),g=h[0],p=h[1],m=(0,i.useState)(""),S=(0,a.default)(m,2),v=S[0],b=S[1],x=(0,i.useState)("all"),P=(0,a.default)(x,2),T=P[0],C=P[1],w=(0,i.useState)(!0),k=(0,a.default)(w,2),A=k[0],O=k[1],E=(0,i.useState)(!1),R=(0,a.default)(E,2),j=R[0],L=R[1],I=(0,i.useState)(null),_=(0,a.default)(I,2),B=_[0],F=_[1],V=(0,i.useState)(0),M=(0,a.default)(V,2),W=M[0],N=M[1],K=[{symbol:"AAPL",name:"Apple Inc.",price:178.72,change:2.15,changePercent:1.22,category:"traditional"},{symbol:"GOOGL",name:"Alphabet Inc.",price:138.21,change:-1.45,changePercent:-1.04,category:"traditional"},{symbol:"MSFT",name:"Microsoft Corp.",price:378.85,change:3.22,changePercent:.86,category:"traditional"},{symbol:"TSLA",name:"Tesla Inc.",price:248.5,change:-8.75,changePercent:-3.4,category:"traditional"},{symbol:"AMZN",name:"Amazon.com Inc.",price:155.89,change:1.89,changePercent:1.23,category:"traditional"},{symbol:"COIN",name:"Coinbase Global",price:245.67,change:15.23,changePercent:6.6,category:"crypto"},{symbol:"MSTR",name:"MicroStrategy Inc.",price:387.45,change:22.15,changePercent:6.07,category:"crypto"},{symbol:"RIOT",name:"Riot Platforms",price:12.85,change:.95,changePercent:7.98,category:"crypto"},{symbol:"MARA",name:"Marathon Digital",price:19.67,change:1.34,changePercent:7.31,category:"crypto"},{symbol:"HOOD",name:"Robinhood Markets",price:23.45,change:-.67,changePercent:-2.78,category:"crypto"},{symbol:"VANA",name:"Vanna Holdings",price:45.32,change:3.21,changePercent:7.62,category:"crypto"},{symbol:"CIRCLE",name:"Circle Internet Financial",price:125,change:5.67,changePercent:4.75,category:"premium"},{symbol:"GEMINI",name:"Gemini Trust Company",price:89.5,change:2.15,changePercent:2.46,category:"premium"},{symbol:"KRAKEN",name:"Kraken Digital Asset Exchange",price:156.78,change:8.9,changePercent:6.02,category:"premium"},{symbol:"OPENSEA",name:"OpenSea Technologies",price:67.34,change:-2.45,changePercent:-3.51,category:"premium"}];(0,i.useEffect)(function(){D(),z()},[]),(0,i.useEffect)(function(){$()},[v,T,r]);var D=function(){var e=(0,o.default)(function*(){O(!0);try{yield new Promise(function(e){return setTimeout(e,1e3)}),f(K)}catch(e){console.error("Failed to load stocks:",e),l.Alert.alert("Error","Failed to load stock data")}finally{O(!1)}});return function(){return e.apply(this,arguments)}}(),z=function(){var e=(0,o.default)(function*(){try{var e=c.mobileWalletService.getPublicKey();if(F(e),e){var t=yield c.mobileWalletService.getBalance();N(t)}}catch(n){console.error("Failed to check wallet connection:",n)}});return function(){return e.apply(this,arguments)}}(),U=function(){var e=(0,o.default)(function*(){try{var e=yield c.mobileWalletService.connect();if(e){F(e);var t=yield c.mobileWalletService.getBalance();N(t),l.Alert.alert("Success",`Wallet connected: ${e.toBase58().substring(0,8)}...`)}}catch(n){console.error("Wallet connection failed:",n),l.Alert.alert("Error","Failed to connect wallet")}});return function(){return e.apply(this,arguments)}}(),$=function(){var e=r;"all"!==T&&(e=e.filter(function(e){return e.category===T})),v&&(e=e.filter(function(e){return e.symbol.toLowerCase().includes(v.toLowerCase())||e.name.toLowerCase().includes(v.toLowerCase())})),p(e)},H=function(){var e=(0,o.default)(function*(e){B?l.Alert.prompt("Purchase Stock",`How many shares of ${e.symbol} would you like to buy?`,[{text:"Cancel",style:"cancel"},{text:"Buy",onPress:function(){var t=(0,o.default)(function*(t){t&&!isNaN(Number(t))&&(yield Y(e,Number(t)))});return function(e){return t.apply(this,arguments)}}()}],"plain-text","1"):l.Alert.alert("Wallet Required","Please connect your wallet to make purchases")});return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=(0,o.default)(function*(e,t){try{var n=s.solanaPayService.createStockPurchasePayment(e.symbol,e.price,t);l.Alert.alert("Confirm Purchase",`Purchase ${t} shares of ${e.symbol}\n\nTotal: $${n.totalUSD.toFixed(2)}\nSOL Amount: ${n.solAmount.toFixed(4)} SOL\nTrading Fee: ${n.feeSOL.toFixed(4)} SOL\nTotal SOL: ${(n.solAmount+n.feeSOL).toFixed(4)} SOL`,[{text:"Cancel",style:"cancel"},{text:"Pay with SOL",onPress:function(){return q(n,"SOL")}},{text:"Pay with BONK",onPress:function(){return q(n,"BONK")}}])}catch(r){console.error("Purchase processing failed:",r),l.Alert.alert("Error","Failed to process purchase")}});return function(t,n){return e.apply(this,arguments)}}(),q=function(){var e=(0,o.default)(function*(e,t){try{if(!B)return;var n=yield s.solanaPayService.createStockPurchaseTransaction(B,e,t),r=yield c.mobileWalletService.signAndSendTransaction(n);r?l.Alert.alert("Purchase Successful!",`Transaction: ${r.substring(0,8)}...\n\nYou now own ${e.quantity} shares of ${e.stockSymbol}`,[{text:"OK",onPress:function(){return G()}}]):l.Alert.alert("Error","Transaction failed")}catch(o){console.error("Purchase execution failed:",o),l.Alert.alert("Error","Failed to execute purchase")}});return function(t,n){return e.apply(this,arguments)}}(),G=function(){var e=(0,o.default)(function*(){if(B){var e=yield c.mobileWalletService.getBalance();N(e)}});return function(){return e.apply(this,arguments)}}(),J=function(){var e=(0,o.default)(function*(){L(!0),yield D(),yield G(),L(!1)});return function(){return e.apply(this,arguments)}}();return A?(0,u.jsxs)(l.View,{style:d.loadingContainer,children:[(0,u.jsx)(l.ActivityIndicator,{size:"large",color:"#9945FF"}),(0,u.jsx)(l.Text,{style:d.loadingText,children:"Loading stocks..."})]}):(0,u.jsxs)(l.View,{style:d.container,children:[(0,u.jsx)(l.View,{style:d.walletStatus,children:B?(0,u.jsxs)(l.View,{style:d.walletConnected,children:[(0,u.jsxs)(l.Text,{style:d.walletText,children:[B.toBase58().substring(0,8),"..."]}),(0,u.jsxs)(l.Text,{style:d.balanceText,children:[W.toFixed(4)," SOL"]})]}):(0,u.jsx)(l.TouchableOpacity,{style:d.connectButton,onPress:U,children:(0,u.jsx)(l.Text,{style:d.connectButtonText,children:"Connect Wallet"})})}),(0,u.jsx)(l.View,{style:d.searchContainer,children:(0,u.jsx)(l.TextInput,{style:d.searchInput,placeholder:"Search stocks...",value:v,onChangeText:b,placeholderTextColor:"#999"})}),(0,u.jsx)(l.View,{style:d.categoryFilter,children:["all","traditional","crypto","premium"].map(function(e){return(0,u.jsx)(l.TouchableOpacity,{style:[d.categoryButton,T===e&&d.activeCategoryButton],onPress:function(){return C(e)},children:(0,u.jsx)(l.Text,{style:[d.categoryButtonText,T===e&&d.activeCategoryButtonText],children:e.charAt(0).toUpperCase()+e.slice(1)})},e)})}),(0,u.jsx)(l.FlatList,{data:g,renderItem:function({item:t}){return(0,u.jsx)(l.TouchableOpacity,{style:d.stockItem,onPress:function(){return e?e(t):H(t)},children:(0,u.jsxs)(l.View,{style:d.stockInfo,children:[(0,u.jsxs)(l.View,{style:d.stockHeader,children:[(0,u.jsx)(l.Text,{style:d.stockSymbol,children:t.symbol}),(0,u.jsx)(l.View,{style:[d.categoryBadge,d[`${t.category}Badge`]],children:(0,u.jsx)(l.Text,{style:d.categoryText,children:t.category.toUpperCase()})})]}),(0,u.jsx)(l.Text,{style:d.stockName,children:t.name}),(0,u.jsxs)(l.View,{style:d.stockPrice,children:[(0,u.jsxs)(l.Text,{style:d.priceText,children:["$",t.price.toFixed(2)]}),(0,u.jsxs)(l.Text,{style:[d.changeText,t.change>=0?d.positive:d.negative],children:[t.change>=0?"+":"",t.change.toFixed(2)," (",t.changePercent.toFixed(2),"%)"]})]})]})})},keyExtractor:function(e){return e.symbol},refreshControl:(0,u.jsx)(l.RefreshControl,{refreshing:j,onRefresh:J}),showsVerticalScrollIndicator:!1,contentContainerStyle:d.listContent})]})};var d=l.StyleSheet.create({container:{flex:1,backgroundColor:"#f8f9fa"},loadingContainer:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"#f8f9fa"},loadingText:{marginTop:16,fontSize:16,color:"#666"},walletStatus:{padding:16,backgroundColor:"#fff",borderBottomWidth:1,borderBottomColor:"#e0e0e0"},walletConnected:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},walletText:{fontSize:14,color:"#333",fontWeight:"500"},balanceText:{fontSize:16,color:"#9945FF",fontWeight:"bold"},connectButton:{backgroundColor:"#9945FF",paddingHorizontal:20,paddingVertical:10,borderRadius:8,alignSelf:"center"},connectButtonText:{color:"#fff",fontSize:16,fontWeight:"600"},searchContainer:{padding:16,backgroundColor:"#fff"},searchInput:{height:44,borderWidth:1,borderColor:"#ddd",borderRadius:8,paddingHorizontal:16,fontSize:16,backgroundColor:"#f8f9fa"},categoryFilter:{flexDirection:"row",paddingHorizontal:16,paddingVertical:8,backgroundColor:"#fff",borderBottomWidth:1,borderBottomColor:"#e0e0e0"},categoryButton:{paddingHorizontal:16,paddingVertical:8,marginRight:8,borderRadius:20,backgroundColor:"#f0f0f0"},activeCategoryButton:{backgroundColor:"#9945FF"},categoryButtonText:{fontSize:14,color:"#666",fontWeight:"500"},activeCategoryButtonText:{color:"#fff"},listContent:{paddingVertical:8},stockItem:{backgroundColor:"#fff",marginHorizontal:16,marginVertical:4,borderRadius:12,padding:16,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:4,elevation:2},stockInfo:{flex:1},stockHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:4},stockSymbol:{fontSize:18,fontWeight:"bold",color:"#333"},categoryBadge:{paddingHorizontal:8,paddingVertical:2,borderRadius:12},traditionalBadge:{backgroundColor:"#e3f2fd"},cryptoBadge:{backgroundColor:"#f3e5f5"},premiumBadge:{backgroundColor:"#fff3e0"},categoryText:{fontSize:10,fontWeight:"600",color:"#666"},stockName:{fontSize:14,color:"#666",marginBottom:8},stockPrice:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},priceText:{fontSize:16,fontWeight:"600",color:"#333"},changeText:{fontSize:14,fontWeight:"500"},positive:{color:"#4caf50"},negative:{color:"#f44336"}})},6702:(e,t,n)=>{var r=n(3880).Buffer,o=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.seedVaultService=t.SeedVaultUtils=t.MobileSeedVault=void 0;var a=o(n(9293)),i=o(n(7383)),l=o(n(4579)),c=n(6414),s=o(n(7101)),u=function(e,t){if("function"==typeof WeakMap)var n=new WeakMap,r=new WeakMap;return function(e,t){if(!t&&e&&e.__esModule)return e;var o,a,i={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return i;if(o=t?r:n){if(o.has(e))return o.get(e);o.set(e,i)}for(var l in e)"default"!==l&&{}.hasOwnProperty.call(e,l)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,l))&&(a.get||a.set)?o(i,l,a):i[l]=e[l]);return i}(e,t)}(n(1537)),d=n(3541);var f=t.MobileSeedVault=(0,l.default)(function e(){(0,i.default)(this,e),this.SEED_VAULT_PREFIX="sol_stocks_seed_",this.KEYCHAIN_SERVICE="SolStocksKeychainService"},[{key:"generateSeed",value:function(){var e=(0,a.default)(function*(){try{var e=new Uint8Array(32);return(0,d.getRandomBytes)(e),e}catch(t){throw console.error("Seed generation failed:",t),new Error("Failed to generate secure seed")}});return function(){return e.apply(this,arguments)}}()},{key:"storeSeed",value:function(){var e=(0,a.default)(function*(e,t){try{var n=r.from(e).toString("base64"),o=`${this.SEED_VAULT_PREFIX}${t}`,a=yield u.setInternetCredentials(o,t,n,{accessControl:u.ACCESS_CONTROL.BIOMETRY_CURRENT_SET_OR_DEVICE_PASSCODE,authenticatePrompt:"Authenticate to store your Sol Stocks seed",service:this.KEYCHAIN_SERVICE,securityLevel:u.SECURITY_LEVEL.SECURE_HARDWARE});return a&&(yield s.default.setItem(`${o}_metadata`,JSON.stringify({alias:t,createdAt:Date.now(),lastUsed:Date.now()}))),a}catch(i){return console.error("Seed storage failed:",i),!1}});return function(t,n){return e.apply(this,arguments)}}()},{key:"retrieveSeed",value:function(){var e=(0,a.default)(function*(e){try{var t=`${this.SEED_VAULT_PREFIX}${e}`,n=yield u.getInternetCredentials(t,{authenticatePrompt:"Authenticate to access your Sol Stocks seed",service:this.KEYCHAIN_SERVICE});if(n&&n.password){yield s.default.setItem(`${t}_metadata`,JSON.stringify({alias:e,lastUsed:Date.now()}));var o=r.from(n.password,"base64");return new Uint8Array(o)}return null}catch(a){return console.error("Seed retrieval failed:",a),null}});return function(t){return e.apply(this,arguments)}}()},{key:"deleteSeed",value:function(){var e=(0,a.default)(function*(e){try{var t=`${this.SEED_VAULT_PREFIX}${e}`,n=yield u.resetInternetCredentials(t,{service:this.KEYCHAIN_SERVICE});return n&&(yield s.default.removeItem(`${t}_metadata`)),n}catch(r){return console.error("Seed deletion failed:",r),!1}});return function(t){return e.apply(this,arguments)}}()},{key:"createKeypairFromSeed",value:function(e){try{return c.Keypair.fromSeed(e.slice(0,32))}catch(t){throw console.error("Keypair creation failed:",t),new Error("Failed to create keypair from seed")}}},{key:"isDeviceSecure",value:function(){var e=(0,a.default)(function*(){try{var e=yield u.getSecurityLevel({service:this.KEYCHAIN_SERVICE});return e===u.SECURITY_LEVEL.SECURE_HARDWARE||e===u.SECURITY_LEVEL.SECURE_SOFTWARE}catch(t){return console.error("Device security check failed:",t),!1}});return function(){return e.apply(this,arguments)}}()},{key:"listSeeds",value:function(){var e=(0,a.default)(function*(){var e=this;try{var t=(yield s.default.getAllKeys()).filter(function(t){return t.includes(`${e.SEED_VAULT_PREFIX}`)&&t.includes("_metadata")}),n=yield Promise.all(t.map(function(){var e=(0,a.default)(function*(e){try{var t=yield s.default.getItem(e);return t?JSON.parse(t):null}catch{return null}});return function(t){return e.apply(this,arguments)}}()));return n.filter(function(e){return null!==e})}catch(r){return console.error("Seed listing failed:",r),[]}});return function(){return e.apply(this,arguments)}}()},{key:"createUserSeed",value:function(){var e=(0,a.default)(function*(e="default"){try{var t=yield this.generateSeed(),n=this.createKeypairFromSeed(t);if(!(yield this.storeSeed(t,e)))throw new Error("Failed to store seed securely");return{seed:t,keypair:n,publicKey:n.publicKey.toBase58()}}catch(r){return console.error("User seed creation failed:",r),null}});return function(){return e.apply(this,arguments)}}()},{key:"recoverUserKeypair",value:function(){var e=(0,a.default)(function*(e="default"){try{var t=yield this.retrieveSeed(e);return t?this.createKeypairFromSeed(t):null}catch(n){return console.error("User keypair recovery failed:",n),null}});return function(){return e.apply(this,arguments)}}()}]),y=t.seedVaultService=new f;t.SeedVaultUtils={setupUserWallet(){return(0,a.default)(function*(e="sol_stocks_user"){try{var t=yield y.recoverUserKeypair(e),n=!1;if(!t){var r=yield y.createUserSeed(e);if(!r)return null;t=r.keypair,n=!0}return{publicKey:t.publicKey.toBase58(),isNewWallet:n}}catch(o){return console.error("Wallet setup failed:",o),null}}).apply(this,arguments)},signTransaction(e){return(0,a.default)(function*(e,t="sol_stocks_user"){try{var n=yield y.recoverUserKeypair(t);if(!n)throw new Error("No keypair found for user");return e.sign(n),e}catch(r){return console.error("Transaction signing failed:",r),null}}).apply(this,arguments)}}},7790:()=>{},8267:(e,t,n)=>{var r=n(4994);Object.defineProperty(t,"__esModule",{value:!0}),t.mobileWalletService=t.MobileWalletService=void 0;var o=r(n(9293)),a=r(n(7383)),i=r(n(4579)),l=n(2617),c=n(6414),s=n(5027),u=t.MobileWalletService=(0,i.default)(function e(t){(0,a.default)(this,e),this.connectedPublicKey=null,this.connection=s.connection,this.config=t},[{key:"connect",value:function(){var e=(0,o.default)(function*(){var e=this;try{var t=yield(0,l.transact)(function(){var t=(0,o.default)(function*(t){return yield t.authorize({cluster:e.config.cluster,identity:s.APP_IDENTITY})});return function(e){return t.apply(this,arguments)}}());if(t.accounts.length>0)return this.connectedPublicKey=t.accounts[0].publicKey,this.config.onConnect?.(this.connectedPublicKey),this.connectedPublicKey;throw new Error("No accounts found")}catch(n){return console.error("Mobile wallet connection failed:",n),this.config.onError?.(n),null}});return function(){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){var e=(0,o.default)(function*(){try{yield(0,l.transact)(function(){var e=(0,o.default)(function*(e){yield e.deauthorize({auth_token:""})});return function(t){return e.apply(this,arguments)}}()),this.connectedPublicKey=null,this.config.onDisconnect?.()}catch(e){console.error("Mobile wallet disconnection failed:",e),this.config.onError?.(e)}});return function(){return e.apply(this,arguments)}}()},{key:"signTransaction",value:function(){var e=(0,o.default)(function*(e){var t=this;if(!this.connectedPublicKey)throw new Error("Wallet not connected");try{var n=yield(0,l.transact)(function(){var n=(0,o.default)(function*(n){var r=(yield t.connection.getLatestBlockhash()).blockhash;return e.recentBlockhash=r,e.feePayer=t.connectedPublicKey,(yield n.signTransactions({transactions:[e]}))[0]});return function(e){return n.apply(this,arguments)}}());return n}catch(r){return console.error("Transaction signing failed:",r),this.config.onError?.(r),null}});return function(t){return e.apply(this,arguments)}}()},{key:"signAndSendTransaction",value:function(){var e=(0,o.default)(function*(e){var t=this;if(!this.connectedPublicKey)throw new Error("Wallet not connected");try{var n=yield(0,l.transact)(function(){var n=(0,o.default)(function*(n){var r=(yield t.connection.getLatestBlockhash()).blockhash;return e.recentBlockhash=r,e.feePayer=t.connectedPublicKey,(yield n.signAndSendTransactions({transactions:[e]}))[0]});return function(e){return n.apply(this,arguments)}}());return yield this.connection.confirmTransaction(n),n}catch(r){return console.error("Transaction failed:",r),this.config.onError?.(r),null}});return function(t){return e.apply(this,arguments)}}()},{key:"requestAirdrop",value:function(){var e=(0,o.default)(function*(e=2){if(!this.connectedPublicKey)throw new Error("Wallet not connected");try{var t=yield this.connection.requestAirdrop(this.connectedPublicKey,e*c.LAMPORTS_PER_SOL);return yield this.connection.confirmTransaction(t),t}catch(n){return console.error("Airdrop failed:",n),this.config.onError?.(n),null}});return function(){return e.apply(this,arguments)}}()},{key:"getBalance",value:function(){var e=(0,o.default)(function*(){if(!this.connectedPublicKey)return 0;try{return(yield this.connection.getBalance(this.connectedPublicKey))/c.LAMPORTS_PER_SOL}catch(e){return console.error("Balance fetch failed:",e),0}});return function(){return e.apply(this,arguments)}}()},{key:"getPublicKey",value:function(){return this.connectedPublicKey}},{key:"isConnected",value:function(){return null!==this.connectedPublicKey}}]);t.mobileWalletService=new u({cluster:"devnet",onConnect:function(e){console.log("Wallet connected:",e.toBase58())},onDisconnect:function(){console.log("Wallet disconnected")},onError:function(e){console.error("Mobile wallet error:",e)}})}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.m=e,(()=>{var e=[];n.O=(t,r,o,a)=>{if(!r){var i=1/0;for(u=0;u<e.length;u++){for(var[r,o,a]=e[u],l=!0,c=0;c<r.length;c++)(!1&a||i>=a)&&Object.keys(n.O).every(e=>n.O[e](r[c]))?r.splice(c--,1):(l=!1,a<i&&(i=a));if(l){e.splice(u--,1);var s=o();void 0!==s&&(t=s)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[r,o,a]}})(),n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="/",(()=>{var e={792:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var o,a,[i,l,c]=r,s=0;if(i.some(t=>0!==e[t])){for(o in l)n.o(l,o)&&(n.m[o]=l[o]);if(c)var u=c(n)}for(t&&t(r);s<i.length;s++)a=i[s],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(u)},r=self.webpackChunkweb=self.webpackChunkweb||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=n.O(void 0,[727],()=>n(1044));r=n.O(r)})();
//# sourceMappingURL=main.6e8b303a.js.map